CREATE USER inventoryuseradmin;
ALTER USER inventoryuseradmin WITH ENCRYPTED PASSWORD 'Technical$Challenge2023';

CREATE DATABASE vaccinationInventoryApp;
GRANT ALL PRIVILEGES ON DATABASE vaccinationInventoryApp TO inventoryuseradmin;

create table person(
   id varchar(10) primary key,
   name varchar(100) not null,
   lastname varchar(100) not null,
   email varchar(75) not null,
   birthdate date,
   address varchar(100),
   phonenumber varchar(10),
   isVaccinated boolean
);

create table userApp(
   username varchar(50) primary key,
   password varchar(100) not null,
	role varchar(20) not null
);

--Create User Administrator to Test App

INSERT INTO public.person(
	id, email, lastname, name)
	VALUES ('0302195177', 'fbernalm@gmail.com', 'Bernal', 'Franklin');

INSERT INTO public.user_app(
	username, password, role)
	VALUES ('0302195177', '$2a$10$VS4rabQBZ0KRO0AEm5Fo8uB/I8wdepnJZ5IxWooQGEqPz8L/INcia', 'ADMINISTRATOR');

--Create Vaccines Tables

CREATE TABLE vaccine
(
    id integer NOT NULL,
    name character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT vaccine_pkey PRIMARY KEY (id)
)

CREATE TABLE vaccine_person
(
    id_person character varying(255) COLLATE pg_catalog."default" NOT NULL,
    id_vaccine integer NOT NULL,
    vaccine_doses integer NOT NULL,
    date timestamp without time zone,
    CONSTRAINT vaccine_person_pkey PRIMARY KEY (id_person, id_vaccine, vaccine_doses)
)

--Insert Vaccines Values in DB
INSERT INTO vaccine(id, name) VALUES (1, Sputnik);
INSERT INTO vaccine(id, name) VALUES (2, AstraZeneca);
INSERT INTO vaccine(id, name) VALUES (3, Pfizer);
INSERT INTO vaccine(id, name) VALUES (4, Jhonson&Jhonson);